{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Buton.module.css","components/SearchBar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","helpers/mapper.js","helpers/images-api.js","App.js","index.js","components/SearchBar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","onChangeHandler","e","console","log","target","value","setState","onFormSubmitHandler","preventDefault","trim","props","onSubmit","toast","className","s","searchbar","searchForm","this","type","searchForm__button","searchForm__buttonLabel","searchForm__input","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","webformatURL","onModal","largeImageURL","tags","galleryItemImage","onClick","src","alt","ItemGallery","images","onImgClick","gallery","map","id","gallery__item","Button","button","modalRoot","document","querySelector","Modal","handleBackdrop","currentTarget","onClose","onEscapeHandler","code","window","addEventListener","removeEventListener","createPortal","overlay","modal","mapper","api","fetchImages","newQuery","fetch","then","response","ok","json","Promise","reject","Error","App","showModal","page","error","loading","toggleModal","prevState","handleSearchSubmit","searchData","onButtonHandler","data","hits","catch","finally","prevProps","prevQuery","length","status","style","position","top","left","transform","zIndex","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1c1f566a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__gboaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery__item\":\"ImageGalleryItem_gallery__item__2Ejrd\",\"galleryItemImage\":\"ImageGalleryItem_galleryItemImage__3lhrt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Buton_button__1RuTa\"};","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n  onChangeHandler = e => {\n    console.log(e.target.value);\n    this.setState({\n      query: e.target.value,\n    });\n  };\n  onFormSubmitHandler = e => {\n    e.preventDefault();\n    if (this.state.query.trim() === '') {\n      toast('Enter your  query');\n      // this.reset();\n      return;\n    }\n    this.props.onSubmit(this.state);\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form className={s.searchForm} onSubmit={this.onFormSubmitHandler}>\n          <button type=\"submit\" className={s.searchForm__button}>\n            <span className={s.searchForm__buttonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.searchForm__input}\n            type=\"text\"\n            onChange={this.onChangeHandler}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import s from './ImageGalleryItem.module.css';\nexport default function ImageGalleryItem({\n  webformatURL,\n  onModal,\n  largeImageURL,\n  tags,\n}) {\n  return (\n    <img\n      className={s.galleryItemImage}\n      onClick={() => onModal(largeImageURL)}\n      src={webformatURL}\n      alt={tags}\n    />\n  );\n}\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport s from './ImageGallery.module.css';\nexport default function ItemGallery({ images, onImgClick }) {\n  return (\n    <ul className={s.gallery}>\n      {images.map(({ id, webformatURL, largeImageURL, tags }) => {\n        return (\n          <li className={s.gallery__item} key={id}>\n            <ImageGalleryItem\n              webformatURL={webformatURL}\n              onModal={onImgClick}\n              tags={tags}\n              largeImageURL={largeImageURL}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n","import s from './Buton.module.css';\n\nexport function Button({ onClick }) {\n  return (\n    <button type=\"button\" onClick={onClick} className={s.button}>\n      Load more\n    </button>\n  );\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\n//создаем  в index.html  div , куда будет  встроена модалка  и  выбираем его\nconst modalRoot = document.querySelector('#modal-root');\nconsole.log(modalRoot);\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    //когда   смонтировалось,  вешаем слушатель  для закрытия  по escape\n    window.addEventListener('keydown', this.onEscapeHandler);\n  }\n  componentWillUnmount() {\n    //когда  закрываем убираем слушател с  клав\n    window.removeEventListener('keydown', this.onEscapeHandler);\n  }\n  //обработчик  клика на  бекдроп для закрытия\n  handleBackdrop = e => {\n    console.log(e.target);\n    console.log(e.currentTarget);\n    if (e.target === e.currentTarget) {\n      // вызываем  ф-ю,  которая  указана в props    модалки который прописан  в Аpp -  onClose\n      this.props.onClose();\n    }\n  };\n\n  onEscapeHandler = e => {\n    console.log(e.code);\n    if (e.code === 'Escape') {\n      // вызываем  ф-ю,  которая  указана в props    модалки который прописан  в Аpp -  onClose\n      this.props.onClose();\n    }\n  };\n  ///при рендере  создется  портал , где становится модалка,   в  скобках  -  что  ставим,   куда\n\n  render() {\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdrop}>\n        <div className={s.modal}>\n          <img src={this.props.largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","export const mapper = images => {\n  return images.map(({ id, webformatURL, largeImageURL, tags }) => ({\n    id,\n    webformatURL,\n    largeImageURL,\n    tags,\n  }));\n};\n","function fetchImages(newQuery) {\n  return fetch(\n    `https://pixabay.com/api/?q=${newQuery}&page=1&key=23459903-45cdb2e5cfc763a2eaddc7311&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error(`Image ${newQuery} not found`));\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { Component } from 'react';\nimport './App.css';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\n\nimport Searchbar from './components/SearchBar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport { Button } from './components/Button/Button';\nimport Modal from './components/Modal/Modal';\nimport { mapper } from './helpers/mapper';\nimport api from './helpers/images-api';\n\nexport default class App extends Component {\n  state = {\n    query: '',\n    largeImageURL: '',\n    showModal: false,\n    page: 1,\n    images: [],\n    error: null,\n    loading: false,\n  };\n\n  toggleModal = largeImageURL => {\n    console.log('click  on list', largeImageURL);\n    this.setState(prevState => ({\n      showModal: !prevState.showModal,\n      largeImageURL: largeImageURL,\n    }));\n  };\n  handleSearchSubmit = searchData => {\n    console.log(searchData);\n    this.setState({\n      query: searchData.query,\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.query;\n    const newQuery = this.state.query;\n    if (prevQuery !== newQuery) {\n      console.log('запрос ізменілся');\n      this.setState({ loading: true, page: 1 });\n      const { fetchImages } = api;\n      fetchImages(newQuery)\n        .then(data => {\n          console.log(data);\n          if (data.hits.length === 0) {\n            toast('No  images  found');\n            return;\n          }\n          this.setState(prevState => ({\n            images: [...mapper(data.hits)],\n            page: prevState.page + 1,\n          }));\n        })\n        .catch(error => this.setState({ error }))\n        .finally(this.setState({ loading: false }));\n    }\n  }\n  onButtonHandler = e => {\n    console.log('click  on  button ');\n    this.setState({ loading: true });\n    // setInterval(() => {\n    fetch(\n      `https://pixabay.com/api/?q=${this.state.query}&page=${this.state.page}&key=23459903-45cdb2e5cfc763a2eaddc7311&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...mapper(data.hits)],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(this.setState({ loading: false }));\n    // }, 3000);\n  };\n\n  render() {\n    const style = {\n      position: 'fixed',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n      zIndex: '99',\n    };\n    const { loading, images, query, largeImageURL, showModal, status } =\n      this.state;\n\n    return (\n      <div className=\"container\">\n        <ToastContainer />\n        <Searchbar onSubmit={this.handleSearchSubmit} />\n        {loading && (\n          <div style={style}>\n            <Loader\n              type=\"Puff\"\n              color=\"#00BFFF\"\n              height={100}\n              width={100}\n              timeout={3000} //3 secs\n            />\n          </div>\n        )}\n\n        {images.length > 0 && (\n          <ImageGallery\n            images={images}\n            query={query}\n            onImgClick={this.toggleModal}\n          />\n        )}\n        {showModal && (\n          <Modal largeImageURL={largeImageURL} onClose={this.toggleModal} />\n        )}\n        {images.length > 11 && !loading && (\n          <Button onClick={this.onButtonHandler} />\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3O3yq\",\"searchForm\":\"Searchbar_searchForm__1TIz5\",\"searchForm__button\":\"Searchbar_searchForm__button__2MSMV\",\"searchFor__button\":\"Searchbar_searchFor__button__1rQRp\",\"searchForm__buttonLabel\":\"Searchbar_searchForm__buttonLabel__32T_J\",\"searchForm__input\":\"Searchbar_searchForm__input__2NNNq\"};"],"sourceRoot":""}