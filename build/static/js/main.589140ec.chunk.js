(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__gboaM"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__2GjdW",modal:"Modal_modal__P3_V5"}},15:function(e,t,a){e.exports={gallery__item:"ImageGalleryItem_gallery__item__2Ejrd",galleryItemImage:"ImageGalleryItem_galleryItemImage__3lhrt"}},16:function(e,t,a){e.exports={button:"Buton_button__1RuTa"}},21:function(e,t,a){},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),c=a.n(o),l=(a(21),a(13)),s=a(4),i=a(5),u=a(7),m=a(6),g=(a(22),a(9)),h=(a(23),a(24),a(14)),d=a.n(h),b=a(8),f=a.n(b),p=a(1),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.onChangeHandler=function(t){console.log(t.target.value),e.setState({query:t.target.value})},e.onFormSubmitHandler=function(t){t.preventDefault(),""!==e.state.query.trim()?(e.props.onSubmit(e.state),e.setState({query:""})):Object(g.b)("Enter your  query")},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:f.a.searchbar,children:Object(p.jsxs)("form",{className:f.a.searchForm,onSubmit:this.onFormSubmitHandler,children:[Object(p.jsx)("button",{type:"submit",className:f.a.searchForm__button,children:Object(p.jsx)("span",{className:f.a.searchForm__buttonLabel,children:"Search"})}),Object(p.jsx)("input",{className:f.a.searchForm__input,type:"text",onChange:this.onChangeHandler,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query})]})})}}]),a}(n.Component),j=a(15),y=a.n(j);function O(e){var t=e.webformatURL,a=e.onModal,n=e.largeImageURL,r=e.tags;return Object(p.jsx)("img",{className:y.a.galleryItemImage,onClick:function(){return a(n)},src:t,alt:r})}var v=a(11),x=a.n(v);function I(e){var t=e.images,a=e.onImgClick;return Object(p.jsx)("ul",{className:x.a.gallery,children:t.map((function(e){var t=e.id,n=e.webformatURL,r=e.largeImageURL,o=e.tags;return Object(p.jsx)("li",{className:x.a.gallery__item,children:Object(p.jsx)(O,{webformatURL:n,onModal:a,tags:o,largeImageURL:r})},t)}))})}var S=a(16),w=a.n(S);function k(e){var t=e.onClick;return Object(p.jsx)("button",{type:"button",onClick:t,className:w.a.button,children:"Load more"})}var L=a(12),F=a.n(L),q=document.querySelector("#modal-root");console.log(q);var C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleBackdrop=function(t){console.log(t.target),console.log(t.currentTarget),t.target===t.currentTarget&&e.props.onClose()},e.onEscapeHandler=function(t){console.log(t.code),"Escape"===t.code&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onEscapeHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onEscapeHandler)}},{key:"render",value:function(){return Object(o.createPortal)(Object(p.jsx)("div",{className:F.a.overlay,onClick:this.handleBackdrop,children:Object(p.jsx)("div",{className:F.a.modal,children:Object(p.jsx)("img",{src:this.props.largeImageURL,alt:""})})}),q)}}]),a}(n.Component),R=function(e){return e.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}))};var U={fetchImages:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=23459903-45cdb2e5cfc763a2eaddc7311&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("Image ".concat(e," not found")))}))}},M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:"",largeImageURL:"",showModal:!1,page:1,images:[],error:null,loading:!1},e.toggleModal=function(t){console.log("click  on list",t),e.setState((function(e){return{showModal:!e.showModal,largeImageURL:t}}))},e.handleSearchSubmit=function(t){console.log(t),e.setState({query:t.query})},e.fetchImgOnQuery=function(){var t=e.state,a=t.query,n=t.page,r=U.fetchImages;a&&(e.setState({loading:!0}),r(a,n).then((function(t){console.log(t),0!==t.hits.length?(e.setState((function(e){return{images:[].concat(Object(l.a)(e.images),Object(l.a)(R(t.hits))),page:e.page+1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})):Object(g.b)("No  images  found")})).catch((function(t){return e.setState({error:t})})).finally(e.setState({loading:!1})))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=t.query,n=this.state.query;this.state.page;a!==n&&(console.log("\u0437\u0430\u043f\u0440\u043e\u0441 \u0456\u0437\u043c\u0435\u043d\u0456\u043b\u0441\u044f"),this.fetchImgOnQuery())}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.images,n=e.query,r=e.largeImageURL,o=e.showModal;return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(g.a,{}),Object(p.jsx)(_,{onSubmit:this.handleSearchSubmit}),t&&Object(p.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"99"},children:Object(p.jsx)(d.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})}),a.length>0&&Object(p.jsx)(I,{images:a,query:n,onImgClick:this.toggleModal}),o&&Object(p.jsx)(C,{largeImageURL:r,onClose:this.toggleModal}),a.length>11&&!t&&Object(p.jsx)(k,{onClick:this.fetchImgOnQuery})]})}}]),a}(n.Component);c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3O3yq",searchForm:"Searchbar_searchForm__1TIz5",searchForm__button:"Searchbar_searchForm__button__2MSMV",searchFor__button:"Searchbar_searchFor__button__1rQRp",searchForm__buttonLabel:"Searchbar_searchForm__buttonLabel__32T_J",searchForm__input:"Searchbar_searchForm__input__2NNNq"}}},[[46,1,2]]]);
//# sourceMappingURL=main.589140ec.chunk.js.map